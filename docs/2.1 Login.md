# School Board Project - Vista Login

## View: Login

En esta interfaz el usuario puede ingresar sus credenciales y dirigirse a la interfaz de `Student Board` o dirigirse directamente a `School Board` a través de pulsar el botón `View School Board`.

![School Board](./img/school_board_login.png)

### Acciones

En la siguiente tabla se listan las acciones de la interfaz `Login`.

Acción | Condición | Vista Inicial | Vista Final | Descripción
--- | --- | --- | --- | ---
`Sign In` | `Fail` | `Login` | `Login` | Indica que no se pudo iniciar sesión.
`Sign In` | `From Student` | `Login` | `Student Board` | Inicia sesión con credenciales.
`Sign In` | `With Comment` | `Login` | `Student Board` | Inicia sesión con credenciales y el comentario adjunto.
`View School Board` | `Without Session` | `Login` | `School Board` | Se dirige a la interfaz de los comentarios sin el tablero del usuario.

En la siguiente tabla se muestran los nombres ajustados en código.

Nombre Original | Nombre en Código | Tipo | Formato
--- | --- | --- |  ---
`Sign In` | `singIn` | `Acción` | `camelCase`
`Fail` | `Fail` | `Condición` | `PascalCase`
`From Student` | `FromStudent` | `Condición` | `PascalCase`
`With Comment` | `WithComment` | `Condición` | `PascalCase`
`With Comment` | `WithComment` | `Condición` | `PascalCase`
`View School Board` | `viewSchoolBoard` | `Acción` | `camelCase`
`Without Session` | `withoutSession` | `Condición` | `PascalCase`
`Without Session` | `withoutSession` | `Condición` | `PascalCase`
`Login` | `Login` | `Vista` | `PascalCase`
`Student Board` | `StudentBoard` | `Vista` | `PascalCase`

### Código

A continuación se muestra el código de la vista principal de `Login`.

> `src/pages/views/Login/index.js`

```jsx
import { useState } from "react";

import useAction from "./useAction";
import useInfo from "./useInfo";
import useSession from "./useSession";

export default function Login() {
    const [result, session] = useSession();

    const { signIn, viewSchoolBoard } = useAction();

    const [username, setUsername] = useState("");
    const [password, setPassword] = useState("");

    return (
        <div className="w-screen h-screen flex flex-col justify-center items-center">
            <div className="w-1/3 border p-8 rounded-lg">
                <div className="flex items-center pb-4">
                    <span className="pr-4"><i className="fas fa-table fa-2x"></i></span>
                    <span className="text-4xl">School Board</span>
                </div>
                <div className="pb-4">
                    <span className="text-3xl text-purple-600">Sign In</span>
                </div>
                <div className="p-4">
                    <div className="py-1">
                        <input
                            className="w-full border-b-2 focus:outline-none focus:border-purple-500 p-1"
                            placeholder="Username"
                            value={username}
                            onChange={event => setUsername(event.target.value)}
                        />
                    </div>
                    <div className="py-1">
                        <input
                            className="w-full border-b-2 focus:outline-none focus:border-purple-500 p-1"
                            type="password"
                            placeholder="password"
                            value={password}
                            onChange={event => setPassword(event.target.value)}
                        />
                    </div>
                    {
                        result?.error && (
                            <div className="py-2">
                                <span className="text-sm text-red-500">* {result.error}</span>
                            </div>
                        )
                    }
                    {
                        result?.comment && (
                            <div className="py-2">
                                <span className="text-sm text-purple-500">Inicia sesión para agregar tu comentario: </span>
                                <span className="text-sm text-purple-500 font-bold">{result.comment}</span>
                            </div>
                        )
                    }
                </div>
                <div className="flex justify-center">
                    <button
                        className="bg-purple-500 hover:bg-purple-700 text-white px-2 py-1 rounded"
                        onClick={() => {
                            signIn({
                                username,
                                password,
                                comment: result?.comment
                            });
                        }}
                    >Enter to Student's Board</button>
                </div>
            </div>
            <div className="p-8">
                <button
                    className="bg-red-500 hover:bg-red-700 text-white px-2 py-1 rounded text-xl"
                    onClick={() => {
                        viewSchoolBoard();
                    }}
                >View School Board</button>
            </div>
        </div>
    );
}
```

A continuación se muestran observaciones sobre el código y algunos comentarios al respecto.

> Accedemos al resultado de llegar a la interfaz `Login`, desde otras vistas o incluso la misma vista `Login`

```js
const [result, session] = useSession();
```

Variable | Tipo | Descripción
--- | --- | ---
`result.error` | `string` | Indica si hay un error a mostrarse
`result.comment` | `string` | Indica si hay un comentario adjunto al inicio de sesión
`session` | `string` | Identificador único de la sesión (ID de la *Transición*)

> Recupera las acciones definidas en el diagrama `Sign In / <Condición>` y `View School Board / <Condición>`

```js
const { signIn, viewSchoolBoard } = useAction();
```

Variable | Tipo | Descripción
--- | --- | ---
`signIn` | `function` | Acción para iniciar sesión. Ejemplo `signIn({ username, password })`
`username` | `string` | Nombre del usuario para iniciar sesión
`password` | `string` | Contraseña del usuario para iniciar sesión
`viewSchoolBoard` | `function` | Acción para ir a los comentarios de la escuela. Ejemplo `viewSchoolBoard()`

> Estados de la vista. Retiene un nombre de usuario y una contraseña, ambos de tipo texto

```js
const [username, setUsername] = useState("");
const [password, setPassword] = useState("");

// username : string - 

// password : string - 
```

Variable | Tipo | Descripción
--- | --- | ---
`username` | `string` | Retiene el valor escrito del usuario en el formulario
`setUsername` | `function` | Actualiza el valor del estado `username`. Ejemplo `setUsername(text)`
`password` | `string` | Retiene el valor escrito de la contraseña en el formulario
`setPassword` | `function` | Actualiza el valor del estado `password`. Ejemplo `setPassword(text)`

> Formulario para capturar el nombre de usuario y la contraseña. Se actualiza el valor del estado `[username, setUsername]` y `[password, setPassword]`

```html
<div className="py-1">
    <input
        className="w-full border-b-2 focus:outline-none focus:border-purple-500 p-1"
        placeholder="Username"
        value={username}
        onChange={event => setUsername(event.target.value)}
    />
</div>
<div className="py-1">
    <input
        className="w-full border-b-2 focus:outline-none focus:border-purple-500 p-1"
        type="password"
        placeholder="password"
        value={password}
        onChange={event => setPassword(event.target.value)}
    />
</div>
```

> Vista condicional para mostrar el error

```html
{
    result?.error && (
        <div className="py-2">
            <span className="text-sm text-red-500">* {result.error}</span>
        </div>
    )
}
```

> Vista condicional para mostrar el comentario adjunto

```html
{
    result?.comment && (
        <div className="py-2">
            <span className="text-sm text-purple-500">Inicia sesión para agregar tu comentario: </span>
            <span className="text-sm text-purple-500 font-bold">{result.comment}</span>
        </div>
    )
}
```

> Botón para iniciar sesión (Entra al tablero del estudiante)

```html
<div className="flex justify-center">
    <button
        className="bg-purple-500 hover:bg-purple-700 text-white px-2 py-1 rounded"
        onClick={() => {
            signIn({
                username,
                password,
                comment: result?.comment
            });
        }}
    >Enter to Student's Board</button>
</div>
```

> Botón para ver los comentarios de la escuela (Entra al tablero de la escuela)

```html
<div className="p-8">
    <button
        className="bg-red-500 hover:bg-red-700 text-white px-2 py-1 rounded text-xl"
        onClick={() => {
            viewSchoolBoard();
        }}
    >View School Board</button>
</div>
```
